# Cloudflare DNS Records Configuration
# This is an example file - copy to cloudflare-dns.tf and configure for your domain
#
# Your zone ID: f1f24715843ec4f3dff0c2f8ad6fe3e7
# Zone name: qarote.io

# Data source to get the zone ID from the domain name
data "cloudflare_zone" "qarote" {
  name = "qarote.io"
}

# A record - Points to an IPv4 address
resource "cloudflare_record" "app" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "app"
  value   = "192.0.2.1"  # Replace with your actual IP
  type    = "A"
  ttl     = 3600  # 1 hour, or use 1 for automatic
  proxied = true  # Enable Cloudflare proxy (orange cloud)
}

# CNAME record - Points to another domain
resource "cloudflare_record" "www" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "www"
  value   = "qarote.io"
  type    = "CNAME"
  ttl     = 3600
  proxied = true
}

# CNAME for API subdomain
resource "cloudflare_record" "api" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "api"
  value   = "your-api-server.example.com"  # Replace with your actual server
  type    = "CNAME"
  ttl     = 3600
  proxied = false  # Usually false for API endpoints
}

# CNAME for Portal subdomain
resource "cloudflare_record" "portal" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "portal"
  value   = "qarote-portal-production.pages.dev"  # Cloudflare Pages project
  type    = "CNAME"
  ttl     = 1  # Automatic TTL for Pages
  proxied = true
}

# CNAME for Staging subdomain
resource "cloudflare_record" "staging" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "staging"
  value   = "your-staging-server.example.com"  # Replace with your actual server
  type    = "CNAME"
  ttl     = 3600
  proxied = false
}

# MX record for email
resource "cloudflare_record" "mx" {
  zone_id  = data.cloudflare_zone.qarote.id
  name     = "@"  # Root domain
  priority = 10
  value    = "mail.example.com"  # Replace with your mail server
  type     = "MX"
  ttl      = 3600
}

# TXT record for SPF (email authentication)
resource "cloudflare_record" "spf" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "@"
  value   = "v=spf1 include:_spf.example.com ~all"  # Replace with your SPF record
  type    = "TXT"
  ttl     = 3600
}

# TXT record for domain verification (e.g., Google Search Console)
resource "cloudflare_record" "google_verification" {
  zone_id = data.cloudflare_zone.qarote.id
  name    = "@"
  value   = "google-site-verification=your-verification-code"  # Replace with actual code
  type    = "TXT"
  ttl     = 3600
}

# Outputs
output "cloudflare_zone_id" {
  description = "Cloudflare Zone ID for qarote.io"
  value       = data.cloudflare_zone.qarote.id
}

output "cloudflare_dns_records" {
  description = "Cloudflare DNS records"
  value = {
    app     = cloudflare_record.app.hostname
    www     = cloudflare_record.www.hostname
    api     = cloudflare_record.api.hostname
    portal  = cloudflare_record.portal.hostname
    staging = cloudflare_record.staging.hostname
  }
}

